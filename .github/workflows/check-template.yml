# Automatically close issues if the body doesn't match our regular expression

name: Enforce issue template

# Run when a new issue is created
# roots/issue-closer action doesn't support other types
on:
  issues:
    types: [opened]

jobs:
  check-template:
    runs-on: ubuntu-latest
    steps:
      - name: Enforce issue template
        uses: roots/issue-closer@v1.1
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          issue-pattern: '\[[xX]\] I agree to fill this issue template'
          issue-close-message: >
            Hello @${issue.user.login} :wave:! Thanks a lot for reporting an
            issue after finding a bug.


            However, **your report doesn't follow the [issue template](https://github.com/j1elo/test-repo/blob/master/.github/ISSUE_TEMPLATE/bug_report.md)**,
            so it is being automatically closed. We are really sorry for that,
            but we need all reports to follow the template, or else it won't be
            possible to understand and help with all issues.


            Please, create a new issue following the template, or reopen this
            same issue to edit and provide all required information.
